!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=5)}([function(t,e,n){"use strict";function r(t,e){var n=e.x-t.x,r=e.y-t.y;return 0===n?r>=0?180:0:n>0?180-(Math.atan(r/n)*(180/Math.PI)-90):-(Math.atan(r/n)*(180/Math.PI)-90)}function o(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function i(t){if(void 0===window.reach_resource_prefix)return t;var e=t.toLowerCase();return e.startsWith("http://")||e.startsWith("https://")||e.startsWith("#")?t:window.reach_resource_prefix.concat(t)}function a(t,e){return 2*t*Math.sin(e/2)}function u(t,e,n){var r=l(n.direction)-l(e.direction),o=f(n.inclination)-f(e.inclination);return{width:a(t,r),height:a(t,o)}}function s(t,e){return(t+e)/2}function c(t){var e=t.split(" ");return{corner1:{direction:parseFloat(e[0]),inclination:parseFloat(e[1])},corner2:{direction:parseFloat(e[2]),inclination:parseFloat(e[3])}}}function l(t){return t%12/-12*2*Math.PI}function f(t){return t%12/12*2*Math.PI}n.d(e,"b",(function(){return r})),n.d(e,"f",(function(){return o})),n.d(e,"c",(function(){return i})),n.d(e,"d",(function(){return u})),n.d(e,"a",(function(){return s})),n.d(e,"e",(function(){return c}))},function(t,e,n){(function(t,n){var r;!function(){var o="object"==typeof self&&self.self===self&&self||"object"==typeof t&&t.global===t&&t||this||{},i=o._,a=Array.prototype,u=Object.prototype,s="undefined"!=typeof Symbol?Symbol.prototype:null,c=a.push,l=a.slice,f=u.toString,p=u.hasOwnProperty,d=Array.isArray,v=Object.keys,h=Object.create,y=function(){},g=function(t){return t instanceof g?t:this instanceof g?void(this._wrapped=t):new g(t)};e.nodeType?o._=g:(!n.nodeType&&n.exports&&(e=n.exports=g),e._=g),g.VERSION="1.9.1";var m,_=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,r,o){return t.call(e,n,r,o)};case 4:return function(n,r,o,i){return t.call(e,n,r,o,i)}}return function(){return t.apply(e,arguments)}},b=function(t,e,n){return g.iteratee!==m?g.iteratee(t,e):null==t?g.identity:g.isFunction(t)?_(t,e,n):g.isObject(t)&&!g.isArray(t)?g.matcher(t):g.property(t)};g.iteratee=m=function(t,e){return b(t,e,1/0)};var w=function(t,e){return e=null==e?t.length-1:+e,function(){for(var n=Math.max(arguments.length-e,0),r=Array(n),o=0;o<n;o++)r[o]=arguments[o+e];switch(e){case 0:return t.call(this,r);case 1:return t.call(this,arguments[0],r);case 2:return t.call(this,arguments[0],arguments[1],r)}var i=Array(e+1);for(o=0;o<e;o++)i[o]=arguments[o];return i[e]=r,t.apply(this,i)}},A=function(t){if(!g.isObject(t))return{};if(h)return h(t);y.prototype=t;var e=new y;return y.prototype=null,e},E=function(t){return function(e){return null==e?void 0:e[t]}},k=function(t,e){return null!=t&&p.call(t,e)},O=function(t,e){for(var n=e.length,r=0;r<n;r++){if(null==t)return;t=t[e[r]]}return n?t:void 0},j=Math.pow(2,53)-1,P=E("length"),x=function(t){var e=P(t);return"number"==typeof e&&0<=e&&e<=j};g.each=g.forEach=function(t,e,n){var r,o;if(e=_(e,n),x(t))for(r=0,o=t.length;r<o;r++)e(t[r],r,t);else{var i=g.keys(t);for(r=0,o=i.length;r<o;r++)e(t[i[r]],i[r],t)}return t},g.map=g.collect=function(t,e,n){e=b(e,n);for(var r=!x(t)&&g.keys(t),o=(r||t).length,i=Array(o),a=0;a<o;a++){var u=r?r[a]:a;i[a]=e(t[u],u,t)}return i};var C=function(t){return function(e,n,r,o){var i=3<=arguments.length;return function(e,n,r,o){var i=!x(e)&&g.keys(e),a=(i||e).length,u=0<t?0:a-1;for(o||(r=e[i?i[u]:u],u+=t);0<=u&&u<a;u+=t){var s=i?i[u]:u;r=n(r,e[s],s,e)}return r}(e,_(n,o,4),r,i)}};g.reduce=g.foldl=g.inject=C(1),g.reduceRight=g.foldr=C(-1),g.find=g.detect=function(t,e,n){var r=(x(t)?g.findIndex:g.findKey)(t,e,n);if(void 0!==r&&-1!==r)return t[r]},g.filter=g.select=function(t,e,n){var r=[];return e=b(e,n),g.each(t,(function(t,n,o){e(t,n,o)&&r.push(t)})),r},g.reject=function(t,e,n){return g.filter(t,g.negate(b(e)),n)},g.every=g.all=function(t,e,n){e=b(e,n);for(var r=!x(t)&&g.keys(t),o=(r||t).length,i=0;i<o;i++){var a=r?r[i]:i;if(!e(t[a],a,t))return!1}return!0},g.some=g.any=function(t,e,n){e=b(e,n);for(var r=!x(t)&&g.keys(t),o=(r||t).length,i=0;i<o;i++){var a=r?r[i]:i;if(e(t[a],a,t))return!0}return!1},g.contains=g.includes=g.include=function(t,e,n,r){return x(t)||(t=g.values(t)),("number"!=typeof n||r)&&(n=0),0<=g.indexOf(t,e,n)},g.invoke=w((function(t,e,n){var r,o;return g.isFunction(e)?o=e:g.isArray(e)&&(r=e.slice(0,-1),e=e[e.length-1]),g.map(t,(function(t){var i=o;if(!i){if(r&&r.length&&(t=O(t,r)),null==t)return;i=t[e]}return null==i?i:i.apply(t,n)}))})),g.pluck=function(t,e){return g.map(t,g.property(e))},g.where=function(t,e){return g.filter(t,g.matcher(e))},g.findWhere=function(t,e){return g.find(t,g.matcher(e))},g.max=function(t,e,n){var r,o,i=-1/0,a=-1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t)for(var u=0,s=(t=x(t)?t:g.values(t)).length;u<s;u++)null!=(r=t[u])&&i<r&&(i=r);else e=b(e,n),g.each(t,(function(t,n,r){o=e(t,n,r),(a<o||o===-1/0&&i===-1/0)&&(i=t,a=o)}));return i},g.min=function(t,e,n){var r,o,i=1/0,a=1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t)for(var u=0,s=(t=x(t)?t:g.values(t)).length;u<s;u++)null!=(r=t[u])&&r<i&&(i=r);else e=b(e,n),g.each(t,(function(t,n,r){((o=e(t,n,r))<a||o===1/0&&i===1/0)&&(i=t,a=o)}));return i},g.shuffle=function(t){return g.sample(t,1/0)},g.sample=function(t,e,n){if(null==e||n)return x(t)||(t=g.values(t)),t[g.random(t.length-1)];var r=x(t)?g.clone(t):g.values(t),o=P(r);e=Math.max(Math.min(e,o),0);for(var i=o-1,a=0;a<e;a++){var u=g.random(a,i),s=r[a];r[a]=r[u],r[u]=s}return r.slice(0,e)},g.sortBy=function(t,e,n){var r=0;return e=b(e,n),g.pluck(g.map(t,(function(t,n,o){return{value:t,index:r++,criteria:e(t,n,o)}})).sort((function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(r<n||void 0===n)return 1;if(n<r||void 0===r)return-1}return t.index-e.index})),"value")};var M=function(t,e){return function(n,r,o){var i=e?[[],[]]:{};return r=b(r,o),g.each(n,(function(e,o){var a=r(e,o,n);t(i,e,a)})),i}};g.groupBy=M((function(t,e,n){k(t,n)?t[n].push(e):t[n]=[e]})),g.indexBy=M((function(t,e,n){t[n]=e})),g.countBy=M((function(t,e,n){k(t,n)?t[n]++:t[n]=1}));var S=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;g.toArray=function(t){return t?g.isArray(t)?l.call(t):g.isString(t)?t.match(S):x(t)?g.map(t,g.identity):g.values(t):[]},g.size=function(t){return null==t?0:x(t)?t.length:g.keys(t).length},g.partition=M((function(t,e,n){t[n?0:1].push(e)}),!0),g.first=g.head=g.take=function(t,e,n){return null==t||t.length<1?null==e?void 0:[]:null==e||n?t[0]:g.initial(t,t.length-e)},g.initial=function(t,e,n){return l.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},g.last=function(t,e,n){return null==t||t.length<1?null==e?void 0:[]:null==e||n?t[t.length-1]:g.rest(t,Math.max(0,t.length-e))},g.rest=g.tail=g.drop=function(t,e,n){return l.call(t,null==e||n?1:e)},g.compact=function(t){return g.filter(t,Boolean)};var D=function(t,e,n,r){for(var o=(r=r||[]).length,i=0,a=P(t);i<a;i++){var u=t[i];if(x(u)&&(g.isArray(u)||g.isArguments(u)))if(e)for(var s=0,c=u.length;s<c;)r[o++]=u[s++];else D(u,e,n,r),o=r.length;else n||(r[o++]=u)}return r};g.flatten=function(t,e){return D(t,e,!1)},g.without=w((function(t,e){return g.difference(t,e)})),g.uniq=g.unique=function(t,e,n,r){g.isBoolean(e)||(r=n,n=e,e=!1),null!=n&&(n=b(n,r));for(var o=[],i=[],a=0,u=P(t);a<u;a++){var s=t[a],c=n?n(s,a,t):s;e&&!n?(a&&i===c||o.push(s),i=c):n?g.contains(i,c)||(i.push(c),o.push(s)):g.contains(o,s)||o.push(s)}return o},g.union=w((function(t){return g.uniq(D(t,!0,!0))})),g.intersection=function(t){for(var e=[],n=arguments.length,r=0,o=P(t);r<o;r++){var i=t[r];if(!g.contains(e,i)){var a;for(a=1;a<n&&g.contains(arguments[a],i);a++);a===n&&e.push(i)}}return e},g.difference=w((function(t,e){return e=D(e,!0,!0),g.filter(t,(function(t){return!g.contains(e,t)}))})),g.unzip=function(t){for(var e=t&&g.max(t,P).length||0,n=Array(e),r=0;r<e;r++)n[r]=g.pluck(t,r);return n},g.zip=w(g.unzip),g.object=function(t,e){for(var n={},r=0,o=P(t);r<o;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n};var I=function(t){return function(e,n,r){n=b(n,r);for(var o=P(e),i=0<t?0:o-1;0<=i&&i<o;i+=t)if(n(e[i],i,e))return i;return-1}};g.findIndex=I(1),g.findLastIndex=I(-1),g.sortedIndex=function(t,e,n,r){for(var o=(n=b(n,r,1))(e),i=0,a=P(t);i<a;){var u=Math.floor((i+a)/2);n(t[u])<o?i=u+1:a=u}return i};var $=function(t,e,n){return function(r,o,i){var a=0,u=P(r);if("number"==typeof i)0<t?a=0<=i?i:Math.max(i+u,a):u=0<=i?Math.min(i+1,u):i+u+1;else if(n&&i&&u)return r[i=n(r,o)]===o?i:-1;if(o!=o)return 0<=(i=e(l.call(r,a,u),g.isNaN))?i+a:-1;for(i=0<t?a:u-1;0<=i&&i<u;i+=t)if(r[i]===o)return i;return-1}};g.indexOf=$(1,g.findIndex,g.sortedIndex),g.lastIndexOf=$(-1,g.findLastIndex),g.range=function(t,e,n){null==e&&(e=t||0,t=0),n||(n=e<t?-1:1);for(var r=Math.max(Math.ceil((e-t)/n),0),o=Array(r),i=0;i<r;i++,t+=n)o[i]=t;return o},g.chunk=function(t,e){if(null==e||e<1)return[];for(var n=[],r=0,o=t.length;r<o;)n.push(l.call(t,r,r+=e));return n};var B=function(t,e,n,r,o){if(!(r instanceof e))return t.apply(n,o);var i=A(t.prototype),a=t.apply(i,o);return g.isObject(a)?a:i};g.bind=w((function(t,e,n){if(!g.isFunction(t))throw new TypeError("Bind must be called on a function");var r=w((function(o){return B(t,r,e,this,n.concat(o))}));return r})),g.partial=w((function(t,e){var n=g.partial.placeholder,r=function(){for(var o=0,i=e.length,a=Array(i),u=0;u<i;u++)a[u]=e[u]===n?arguments[o++]:e[u];for(;o<arguments.length;)a.push(arguments[o++]);return B(t,r,this,this,a)};return r})),(g.partial.placeholder=g).bindAll=w((function(t,e){var n=(e=D(e,!1,!1)).length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var r=e[n];t[r]=g.bind(t[r],t)}})),g.memoize=function(t,e){var n=function(r){var o=n.cache,i=""+(e?e.apply(this,arguments):r);return k(o,i)||(o[i]=t.apply(this,arguments)),o[i]};return n.cache={},n},g.delay=w((function(t,e,n){return setTimeout((function(){return t.apply(null,n)}),e)})),g.defer=g.partial(g.delay,g,1),g.throttle=function(t,e,n){var r,o,i,a,u=0;n||(n={});var s=function(){u=!1===n.leading?0:g.now(),r=null,a=t.apply(o,i),r||(o=i=null)},c=function(){var c=g.now();u||!1!==n.leading||(u=c);var l=e-(c-u);return o=this,i=arguments,l<=0||e<l?(r&&(clearTimeout(r),r=null),u=c,a=t.apply(o,i),r||(o=i=null)):r||!1===n.trailing||(r=setTimeout(s,l)),a};return c.cancel=function(){clearTimeout(r),u=0,r=o=i=null},c},g.debounce=function(t,e,n){var r,o,i=function(e,n){r=null,n&&(o=t.apply(e,n))},a=w((function(a){if(r&&clearTimeout(r),n){var u=!r;r=setTimeout(i,e),u&&(o=t.apply(this,a))}else r=g.delay(i,e,this,a);return o}));return a.cancel=function(){clearTimeout(r),r=null},a},g.wrap=function(t,e){return g.partial(e,t)},g.negate=function(t){return function(){return!t.apply(this,arguments)}},g.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,r=t[e].apply(this,arguments);n--;)r=t[n].call(this,r);return r}},g.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},g.before=function(t,e){var n;return function(){return 0<--t&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}},g.once=g.partial(g.before,2),g.restArguments=w;var T=!{toString:null}.propertyIsEnumerable("toString"),F=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],q=function(t,e){var n=F.length,r=t.constructor,o=g.isFunction(r)&&r.prototype||u,i="constructor";for(k(t,i)&&!g.contains(e,i)&&e.push(i);n--;)(i=F[n])in t&&t[i]!==o[i]&&!g.contains(e,i)&&e.push(i)};g.keys=function(t){if(!g.isObject(t))return[];if(v)return v(t);var e=[];for(var n in t)k(t,n)&&e.push(n);return T&&q(t,e),e},g.allKeys=function(t){if(!g.isObject(t))return[];var e=[];for(var n in t)e.push(n);return T&&q(t,e),e},g.values=function(t){for(var e=g.keys(t),n=e.length,r=Array(n),o=0;o<n;o++)r[o]=t[e[o]];return r},g.mapObject=function(t,e,n){e=b(e,n);for(var r=g.keys(t),o=r.length,i={},a=0;a<o;a++){var u=r[a];i[u]=e(t[u],u,t)}return i},g.pairs=function(t){for(var e=g.keys(t),n=e.length,r=Array(n),o=0;o<n;o++)r[o]=[e[o],t[e[o]]];return r},g.invert=function(t){for(var e={},n=g.keys(t),r=0,o=n.length;r<o;r++)e[t[n[r]]]=n[r];return e},g.functions=g.methods=function(t){var e=[];for(var n in t)g.isFunction(t[n])&&e.push(n);return e.sort()};var R=function(t,e){return function(n){var r=arguments.length;if(e&&(n=Object(n)),r<2||null==n)return n;for(var o=1;o<r;o++)for(var i=arguments[o],a=t(i),u=a.length,s=0;s<u;s++){var c=a[s];e&&void 0!==n[c]||(n[c]=i[c])}return n}};g.extend=R(g.allKeys),g.extendOwn=g.assign=R(g.keys),g.findKey=function(t,e,n){e=b(e,n);for(var r,o=g.keys(t),i=0,a=o.length;i<a;i++)if(e(t[r=o[i]],r,t))return r};var N,L,K=function(t,e,n){return e in n};g.pick=w((function(t,e){var n={},r=e[0];if(null==t)return n;g.isFunction(r)?(1<e.length&&(r=_(r,e[1])),e=g.allKeys(t)):(r=K,e=D(e,!1,!1),t=Object(t));for(var o=0,i=e.length;o<i;o++){var a=e[o],u=t[a];r(u,a,t)&&(n[a]=u)}return n})),g.omit=w((function(t,e){var n,r=e[0];return g.isFunction(r)?(r=g.negate(r),1<e.length&&(n=e[1])):(e=g.map(D(e,!1,!1),String),r=function(t,n){return!g.contains(e,n)}),g.pick(t,r,n)})),g.defaults=R(g.allKeys,!0),g.create=function(t,e){var n=A(t);return e&&g.extendOwn(n,e),n},g.clone=function(t){return g.isObject(t)?g.isArray(t)?t.slice():g.extend({},t):t},g.tap=function(t,e){return e(t),t},g.isMatch=function(t,e){var n=g.keys(e),r=n.length;if(null==t)return!r;for(var o=Object(t),i=0;i<r;i++){var a=n[i];if(e[a]!==o[a]||!(a in o))return!1}return!0},N=function(t,e,n,r){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return!1;if(t!=t)return e!=e;var o=typeof t;return("function"===o||"object"===o||"object"==typeof e)&&L(t,e,n,r)},L=function(t,e,n,r){t instanceof g&&(t=t._wrapped),e instanceof g&&(e=e._wrapped);var o=f.call(t);if(o!==f.call(e))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return s.valueOf.call(t)===s.valueOf.call(e)}var i="[object Array]"===o;if(!i){if("object"!=typeof t||"object"!=typeof e)return!1;var a=t.constructor,u=e.constructor;if(a!==u&&!(g.isFunction(a)&&a instanceof a&&g.isFunction(u)&&u instanceof u)&&"constructor"in t&&"constructor"in e)return!1}r=r||[];for(var c=(n=n||[]).length;c--;)if(n[c]===t)return r[c]===e;if(n.push(t),r.push(e),i){if((c=t.length)!==e.length)return!1;for(;c--;)if(!N(t[c],e[c],n,r))return!1}else{var l,p=g.keys(t);if(c=p.length,g.keys(e).length!==c)return!1;for(;c--;)if(l=p[c],!k(e,l)||!N(t[l],e[l],n,r))return!1}return n.pop(),r.pop(),!0},g.isEqual=function(t,e){return N(t,e)},g.isEmpty=function(t){return null==t||(x(t)&&(g.isArray(t)||g.isString(t)||g.isArguments(t))?0===t.length:0===g.keys(t).length)},g.isElement=function(t){return!(!t||1!==t.nodeType)},g.isArray=d||function(t){return"[object Array]"===f.call(t)},g.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},g.each(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],(function(t){g["is"+t]=function(e){return f.call(e)==="[object "+t+"]"}})),g.isArguments(arguments)||(g.isArguments=function(t){return k(t,"callee")});var W=o.document&&o.document.childNodes;"object"!=typeof Int8Array&&"function"!=typeof W&&(g.isFunction=function(t){return"function"==typeof t||!1}),g.isFinite=function(t){return!g.isSymbol(t)&&isFinite(t)&&!isNaN(parseFloat(t))},g.isNaN=function(t){return g.isNumber(t)&&isNaN(t)},g.isBoolean=function(t){return!0===t||!1===t||"[object Boolean]"===f.call(t)},g.isNull=function(t){return null===t},g.isUndefined=function(t){return void 0===t},g.has=function(t,e){if(!g.isArray(e))return k(t,e);for(var n=e.length,r=0;r<n;r++){var o=e[r];if(null==t||!p.call(t,o))return!1;t=t[o]}return!!n},g.noConflict=function(){return o._=i,this},g.identity=function(t){return t},g.constant=function(t){return function(){return t}},g.noop=function(){},g.property=function(t){return g.isArray(t)?function(e){return O(e,t)}:E(t)},g.propertyOf=function(t){return null==t?function(){}:function(e){return g.isArray(e)?O(t,e):t[e]}},g.matcher=g.matches=function(t){return t=g.extendOwn({},t),function(e){return g.isMatch(e,t)}},g.times=function(t,e,n){var r=Array(Math.max(0,t));e=_(e,n,1);for(var o=0;o<t;o++)r[o]=e(o);return r},g.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},g.now=Date.now||function(){return(new Date).getTime()};var U={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},H=g.invert(U),z=function(t){var e=function(e){return t[e]},n="(?:"+g.keys(t).join("|")+")",r=RegExp(n),o=RegExp(n,"g");return function(t){return t=null==t?"":""+t,r.test(t)?t.replace(o,e):t}};g.escape=z(U),g.unescape=z(H),g.result=function(t,e,n){g.isArray(e)||(e=[e]);var r=e.length;if(!r)return g.isFunction(n)?n.call(t):n;for(var o=0;o<r;o++){var i=null==t?void 0:t[e[o]];void 0===i&&(i=n,o=r),t=g.isFunction(i)?i.call(t):i}return t};var V=0;g.uniqueId=function(t){var e=++V+"";return t?t+e:e},g.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var J=/(.)^/,G={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Q=/\\|'|\r|\n|\u2028|\u2029/g,X=function(t){return"\\"+G[t]};g.template=function(t,e,n){!e&&n&&(e=n),e=g.defaults({},e,g.templateSettings);var r,o=RegExp([(e.escape||J).source,(e.interpolate||J).source,(e.evaluate||J).source].join("|")+"|$","g"),i=0,a="__p+='";t.replace(o,(function(e,n,r,o,u){return a+=t.slice(i,u).replace(Q,X),i=u+e.length,n?a+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?a+="'+\n((__t=("+r+"))==null?'':__t)+\n'":o&&(a+="';\n"+o+"\n__p+='"),e})),a+="';\n",e.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{r=new Function(e.variable||"obj","_",a)}catch(e){throw e.source=a,e}var u=function(t){return r.call(this,t,g)},s=e.variable||"obj";return u.source="function("+s+"){\n"+a+"}",u},g.chain=function(t){var e=g(t);return e._chain=!0,e};var Y=function(t,e){return t._chain?g(e).chain():e};g.mixin=function(t){return g.each(g.functions(t),(function(e){var n=g[e]=t[e];g.prototype[e]=function(){var t=[this._wrapped];return c.apply(t,arguments),Y(this,n.apply(g,t))}})),g},g.mixin(g),g.each(["pop","push","reverse","shift","sort","splice","unshift"],(function(t){var e=a[t];g.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],Y(this,n)}})),g.each(["concat","join","slice"],(function(t){var e=a[t];g.prototype[t]=function(){return Y(this,e.apply(this._wrapped,arguments))}})),g.prototype.value=function(){return this._wrapped},g.prototype.valueOf=g.prototype.toJSON=g.prototype.value,g.prototype.toString=function(){return String(this._wrapped)},void 0===(r=function(){return g}.apply(e,[]))||(n.exports=r)}()}).call(this,n(6),n(7)(t))},function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return i}));var r=n(0);function o(t,e,n){if(!0===t.options.floor)return function(t,e,n){var r=document.createElement("a-entity"),o=0;void 0!==t.options.direction&&(o=t.options.direction%12*-30),r.setAttribute("rotation",`0 ${o} 0`);var i=document.createElement("a-entity"),a=-2;void 0!==t.options.distance&&(a=-1*t.options.distance),i.setAttribute("position",`0 0 ${a}`),i.setAttribute("rotation","-90 0 0");var u=document.createElement("a-entity");u.setAttribute("class","clickable"),u.setAttribute("id","background"),u.setAttribute("vr-passage-link",`name: ${t.link}; event: click`);var s="#0000ff",c="0.7",l="circle";if(void 0!==t.options.backgroundColor&&(s=t.options.backgroundColor),void 0!==t.options.backgroundOpacity&&(c=t.options.backgroundOpacity),void 0!==t.options.shape&&"arrow"!==t.options.shape&&(l=t.options.shape),"arrow"!=t.options.shape&&(u.setAttribute("geometry",`primitive: ${l};`),u.setAttribute("material",`color:  ${s};  shader:  flat; opacity: ${c};`)),"arrow"===t.options.shape){var f=document.createElement("a-entity");f.setAttribute("class","clickable"),f.setAttribute("vr-passage-link",`name: ${t.link}; event: click`),f.setAttribute("geometry","primitive: arrow;"),f.setAttribute("material",`color:  ${s};  shader:  standard; opacity: ${c};`),u.appendChild(f)}var p=document.createElement("a-entity"),d="#FAFAFA";return void 0!==t.options.color&&(d=t.options.color),p.setAttribute("text",`align: center; color: ${d}; wrapCount: 18; width: 0.65; value: ${t.text};`),p.setAttribute("position","0 0 0.05"),r.appendChild(i),i.appendChild(u),i.appendChild(p),r}(t);var o=document.createElement("a-entity");o.setAttribute("position","0 1.6 0");var i=document.createElement("a-entity"),a=(e+1)%12*-30,u=0,s=-2,c="1.0",l="1.0";if(void 0!==t.twinePosition&&(a=Object(r.b)(n,t.twinePosition)),void 0!==t.options.direction&&(a=t.options.direction%12*-30),void 0!==t.options.inclination&&(u=t.options.inclination%12*30),void 0!==t.options.distance&&(s=-1*t.options.distance),void 0!==t.options.width&&(c=t.options.width),void 0!==t.options.height&&(l=t.options.height),void 0!==t.options.corners){var f=Object(r.e)(t.options.corners),p=Object(r.d)(-1*s,f.corner1,f.corner2);a=Object(r.a)(f.corner1.direction,f.corner2.direction)%12*-30,u=Object(r.a)(f.corner1.inclination,f.corner2.inclination)%12*30,c=p.width,l=p.height}i.setAttribute("rotation",`${u} ${a} 0`);var d=document.createElement("a-entity");d.setAttribute("position",`0 0 ${s}`);var v=document.createElement("a-entity");v.setAttribute("class","clickable"),v.setAttribute("id","background"),v.setAttribute("vr-passage-link",`name: ${t.link}; event: click`);var h="#0000ff",y="0.7",g="plane";void 0!==t.options.backgroundColor&&(h=t.options.backgroundColor),void 0!==t.options.backgroundOpacity&&(y=t.options.backgroundOpacity),void 0!==t.options.shape&&"arrow"!==t.options.shape&&(g=t.options.shape),v.setAttribute("geometry",`primitive: ${g}; width: ${c}; height: ${l};`),v.setAttribute("material",`color:  ${h};  shader:  flat; opacity: ${y};`);var m="#FAFAFA";if(void 0!==t.options.color&&(m=t.options.color),v.setAttribute("text",`align: center; color: ${m}; wrapCount: 18; width: 0.65; value: ${t.text};`),"arrow"===t.options.shape){var _=document.createElement("a-entity");_.setAttribute("class","clickable"),_.setAttribute("vr-passage-link",`name: ${t.link}; event: click`),_.setAttribute("position","0 -1.6 0"),_.setAttribute("rotation","-90 0 0"),_.setAttribute("geometry","primitive: arrow;"),_.setAttribute("material",`color:  ${h};  shader:  standard; opacity: ${y};`),v.appendChild(_)}return o.appendChild(i),i.appendChild(d),d.appendChild(v),o}function i(t,e,n){var o=document.createElement("a-entity");o.setAttribute("position","0 1.6 0");var i=document.createElement("a-entity"),a=2*(e+1)%12*30,u=0,s=-2,c="1.5",l=`${c/8.5*11}`;if(void 0!==t.twinePosition&&(a=Object(r.b)(n,t.twinePosition)),void 0!==t.options.direction&&(a=t.options.direction%12*-30),void 0!==t.options.inclination&&(u=t.options.inclination%12*30),t.options.distance&&(s=-1*t.options.distance),void 0!==t.options.width&&(c=t.options.width),void 0!==t.options.height&&(l=t.options.height),void 0!==t.options.corners){var f=Object(r.e)(t.options.corners),p=Object(r.d)(-1*s,f.corner1,f.corner2);a=Object(r.a)(f.corner1.direction,f.corner2.direction)%12*-30,u=Object(r.a)(f.corner1.inclination,f.corner2.inclination)%12*30,c=p.width,l=p.height}i.setAttribute("rotation",`${u} ${a} 0`);var d=document.createElement("a-entity");d.setAttribute("position",`0 0 ${s}`);var v=document.createElement("a-entity"),h="#ffffff",y="0.7",g="plane";void 0!==t.options.backgroundColor&&(h=t.options.backgroundColor),void 0!==t.options.backgroundOpacity&&(y=t.options.backgroundOpacity),void 0!==t.options.shape&&(g=t.options.shape),v.setAttribute("id","background"),v.setAttribute("geometry",`primitive: ${g}; width:${c}; height:${l}`),void 0!==t.backgrounds&&void 0!==t.backgrounds[0]?v.setAttribute("material",`shader:  flat; opacity: ${y}; src: ${t.backgrounds[0].src}; transparent: true;`):v.setAttribute("material",`color:  ${h};  shader:  flat; opacity: ${y};`);var m="#000000";return void 0!==t.options.color&&(m=t.options.color),v.setAttribute("text",`align: center; color: ${m}; width: 0.85; wrapCount: 18; value: ${t.text};`),o.appendChild(i),i.appendChild(d),d.appendChild(v),o}},function(t,e,n){"use strict";var r=n(0);function o(t,e){if(!0===t.options.video)return function(t,e){var n=`video-${e}`,o=document.querySelector(`#${n}`);if(null===o){var i=document.querySelector("a-assets");(o=document.createElement("video")).setAttribute("src",Object(r.c)(t.src)),o.setAttribute("autoplay","true"),o.setAttribute("loop","true"),o.setAttribute("id",n),i.appendChild(o)}var a=document.createElement("a-videosphere");return a.setAttribute("src",`#${n}`),o.play(),a}(t,e);var n=document.createElement("a-sky");void 0===t.src?n.setAttribute("src","#reach-default-360"):n.setAttribute("src",Object(r.c)(t.src));var o="true",i=5e3;return!1===t.options.transparent&&(o="false"),void 0!==t.options.distance&&(i=t.options.distance),n.setAttribute("transparent",o),n.setAttribute("radius",i),n}n.d(e,"a",(function(){return o}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(0);function o(t){var e=document.createElement("a-entity");e.setAttribute("position","0 1.6 0");var n=document.createElement("a-entity"),o=0,i=0;void 0!==t.options.direction&&(o=t.options.direction%12*-30),void 0!==t.options.inclination&&(i=t.options.inclination%12*30),n.setAttribute("rotation",`${i} ${o} 0`);var a=0;void 0!==t.options.direction&&(a=-2),void 0!==t.options.distance&&(a=-1*t.options.distance),console.log("sound distance "+a);var u=document.createElement("a-sound");return u.setAttribute("src",Object(r.c)(t.src)),u.setAttribute("position",`0 0 ${a}`),u.setAttribute("autoplay","true"),u.setAttribute("loop","true"),n.appendChild(u),e.appendChild(n),e}},function(t,e,n){"use strict";n.r(e);var r=n(1);n(8);window._=r},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(module,__webpack_exports__,__webpack_require__){"use strict";var _underscore_min_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_underscore_min_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_underscore_min_js__WEBPACK_IMPORTED_MODULE_0__),_utility_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),_sky_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(3),_sound_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(4),_link_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(2),_arrow_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(9),_arrow_js__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(_arrow_js__WEBPACK_IMPORTED_MODULE_5__),storyDocument,startnode;function loadPassage(t){var e=document.querySelectorAll("video");if(null!==e)for(var n=0;n<e.length;n++)e[n].pause();var r=document.querySelector("#container");Object(_utility_js__WEBPACK_IMPORTED_MODULE_1__.f)(r),document.querySelector("a-scene").setAttribute("background","color: black");var o=window.story.render(t.getAttribute("pid"));t.processedContent=o;var i=getBackgroundsInPassage(t);for(n=0;n<i.length;n++){var a=Object(_sky_js__WEBPACK_IMPORTED_MODULE_2__.a)(i[n],window.passage.name);null!==a&&r.appendChild(a)}var u=getLinksInPassage(t);for(n=0;n<u.length;n++){var s=u[n],c=Object(_link_js__WEBPACK_IMPORTED_MODULE_4__.a)(s,n,window.passage.position);r.appendChild(c)}var l=getPanelsInPassage(t);for(n=0;n<l.length;n++){var f=l[n],p=Object(_link_js__WEBPACK_IMPORTED_MODULE_4__.b)(f,n,window.passage.position);r.appendChild(p)}var d=getSoundsInPassage(t);for(n=0;n<d.length;n++){var v=d[n],h=Object(_sound_js__WEBPACK_IMPORTED_MODULE_3__.a)(v);r.appendChild(h)}if(0===i.length){var y=Object(_sky_js__WEBPACK_IMPORTED_MODULE_2__.a)({options:{transparent:!1}},window.passage.name);r.appendChild(y)}}function getPassageById(t){return window.story.passage(t)}function getPassageByName(t){return window.story.passage(t)}function getPassageTwinePosition(t){if(void 0===t)return console.log(`could not find position of passage with name: ${name}`),{x:0,y:0};var e=t.getAttribute("position");if(void 0===e)return{x:0,y:0};var n=e.split(",");return console.log(n),{x:n[0],y:n[1]}}function getLinksInPassage(t){for(var e,n=/(^|({\s*(.+)\s*})|[^`])\[\[\s*((.+)\s*\|\s*(.+)\s*|(.+)\s*)\]\]/g,r=t.processedContent,o=[];null!==(e=n.exec(r));){var i={};if(e[2]&&(i=JSON.parse(e[1])),e[5]){var a=getPassageByName(e[6]);o.push({text:e[5],link:e[6],options:i,twinePosition:getPassageTwinePosition(a)})}else{a=getPassageByName(e[7]);o.push({text:e[7],link:e[7],options:i,twinePosition:getPassageTwinePosition(a)})}}return o}function getBackgroundsInPassage(t){for(var e,n=/({\s*(.+)\s*})?\(\(\s*(.+)\s*\)\)/g,r=t.processedContent,o=[];null!==(e=n.exec(r));){var i={};e[1]&&(i=JSON.parse(e[1])),o.push({src:e[3],options:i})}return o}function getSoundsInPassage(t){for(var e,n=/({\s*(.+)\s*})?~~\s*(.+)\s*~~/g,r=t.processedContent,o=[];null!==(e=n.exec(r));){var i={};e[1]&&(i=JSON.parse(e[1])),o.push({src:e[3],options:i})}return o}function getTextInPassage(t){return{text:t.processedContent.replace(/({\s*.+\s*})?`?(\[\[\s*.+\s*\]\]|`([^`]+)`|~~\s*.+\s*~~|\(\(\s*.+\s*\)\))\s*\n?/g,""),options:{direction:0}}}function getPanelsInPassage(t){for(var e,n=/({\s*(.+)\s*})?`\[\[\s*((.+)\s*\|\s*(.+)\s*|(.+)\s*)\]\]/g,r=t.processedContent,o=[];null!==(e=n.exec(r));){var i={};if(e[1]&&(i=JSON.parse(e[1])),e[4]){(u=getPassageByName(e[5])).processedContent=window.story.render(u.getAttribute("pid"));var a=getBackgroundsInPassage(u);o.push({text:getTextInPassage(u).text,options:i,backgrounds:a,twinePosition:getPassageTwinePosition(u)})}else{var u;(u=getPassageByName(e[6])).processedContent=window.story.render(u.getAttribute("pid"));a=getBackgroundsInPassage(u);o.push({text:getTextInPassage(u).text,options:i,backgrounds:a,twinePosition:getPassageTwinePosition(u)})}}return o}console.log("REACH-0.0.18,18"),AFRAME.registerComponent("vr-passage-link",{schema:{event:{type:"string",default:""},name:{type:"string",default:""}},init:function(){var t=this;this.eventHandlerFn=function(){window.story.show(t.data.name)}},update:function(t){var e=this.data,n=this.el;t.event&&e.event!==t.event&&n.removeEventListener(t.event,this.eventHandlerFn),e.event&&n.addEventListener(e.event,this.eventHandlerFn)},remove:function(){var t=this.data,e=this.el;t.event&&e.removeEventListener(t.event,this.eventHandlerFn)}}),AFRAME.registerComponent("rotation-reader",{init:function(){this.hudtext=document.querySelector("#hudtext")},tick:function(){this.hudtext.setAttribute("text",`value: dir:${(this.el.object3D.rotation.y/(2*Math.PI)*-12%12).toFixed(2)} ele:${(this.el.object3D.rotation.x/(2*Math.PI)*12%12).toFixed(2)}`)}}),AFRAME.registerComponent("reach-load-local",{init:function(){storyDocument=document,console.log("here"),document.querySelector("a-scene").setAttribute("cursor","rayOrigin: mouse"),document.querySelector("a-scene").setAttribute("raycaster","objects: .clickable");var storyData=storyDocument.querySelector("tw-storydata");startnode=storyData.getAttribute("startnode");for(var userScripts=storyDocument.querySelector("tw-storydata").querySelectorAll('*[type="text/twine-javascript"]'),passagesByID={},passagesByName={},passagesArray=storyData.querySelectorAll("tw-passagedata"),i=0;i<passagesArray.length;i++){var id=passagesArray[i].getAttribute("pid"),name=passagesArray[i].getAttribute("name");null!=id&&(passagesByID[id]=passagesArray[i]),null!=name&&(passagesByName[name]=passagesArray[i])}window.story={name:storyData.getAttribute("name"),startnode:storyData.getAttribute("startnode"),creator:storyData.getAttribute("creator"),creatorVersion:storyData.getAttribute("creator-version"),ifid:storyData.getAttribute("ifid"),zoom:storyData.getAttribute("zoom"),format:storyData.getAttribute("format"),formatVersion:storyData.getAttribute("format-version"),options:storyData.getAttribute("options"),history:[],state:{},userScripts:userScripts,checkpointName:"",atCheckpoing:!1,passages:passagesByID,passagesByName:passagesByName,currentCursor:void 0,hud:void 0},window.passage={},window.story.passage=function(t){return null!=window.story.passages[t]?window.story.passages[t]:window.story.passagesByName[t]},window.story.render=function(t){var e=window.story.passage(t);if(void 0!==e)return _.template(e.textContent)({s:window.story.state});console.log("Error: passage was not found: "+t)},window.story.show=function(t,e){var n=window.story.passage(t);void 0!==n?(!0!==e&&window.story.history.push(n.getAttribute("pid")),window.passage={id:n.getAttribute("pid"),name:n.getAttribute("name"),tags:n.getAttribute("tags"),position:getPassageTwinePosition(n),source:n.textContent},loadPassage(n)):console.log("Error: passage not found: "+t)},window.story.start=function(){window.story.show(window.story.startnode)},window.story.stats=function(t){!0===t?document.querySelector("a-scene").setAttribute("stats",!0):document.querySelector("a-scene").removeAttribute("stats")},window.story.cursor=function(t){if(!0===t){if(void 0===window.story.currentCursor){var e=document.createElement("a-entity");e.setAttribute("cursor",""),window.story.currentCursor=e,e.setAttribute("raycaster","objects: .clickable"),e.setAttribute("animation__click","property: scale; startEvents: click; easing: easeInCubic; dur: 150; from: 0.1 0.1 0.1; to: 1 1 1"),e.setAttribute("animation__mouseenter","property: scale; startEvents: mouseenter; easing: easeInCubic; dur: 100; from: 1 1 1; to: 1.2 1.2 1.2"),e.setAttribute("animation__mouseleave","property: scale; startEvents: mouseleave; easing: easeInCubic; dur: 100; to: 1 1 1"),e.setAttribute("material","color: black; shader: flat"),e.setAttribute("position","0 0 -1"),e.setAttribute("geometry","primitive: ring; radiusInner: 0.01; radiusOuter: 0.02;"),document.querySelector("#main-camera").appendChild(e)}}else null!=window.story.currentCursor&&(document.querySelector("#main-camera").removeChild(window.story.currentCursor),window.story.currentCursor=void 0)},window.story.lookPosition=function(t){if(!0===t){if(void 0===window.story.hud){var e=document.createElement("a-entity");e.setAttribute("position","0 0 -1"),e.setAttribute("text","value: 0 0"),e.setAttribute("id","hudtext"),e.setAttribute("geometry","primitive: plane; width:auto; height:auto};"),e.setAttribute("material","color:  #000000;  shader:  flat; opacity: 0.3;"),window.story.hud=e;var n=document.querySelector("a-camera");n.appendChild(e),n.setAttribute("rotation-reader","")}}else void 0!==window.story.hud&&(document.querySelector("a-camera").removeChild(window.story.hud),document.querySelector("a-camera").removeAttribute("rotation-reader"),window.story.hud=void 0)},window.story.isMobile=function(){return AFRAME.utils.device.isMobile()},window.story.headsetConnected=function(){return AFRAME.utils.device.checkHeadsetConnected()};for(var i=0;i<userScripts.length;i++){var script=userScripts[i].innerHTML;try{eval(script)}catch(t){console.log(t)}}if(null!==window.reach_preload_images)for(var i in window.reach_preload_images){var idTag=i,src=Object(_utility_js__WEBPACK_IMPORTED_MODULE_1__.c)(window.reach_preload_images[i]),img=document.createElement("img");img.setAttribute("crossorigin","anonymous"),img.setAttribute("id",idTag),img.setAttribute("src",src),storyDocument.querySelector("a-assets").appendChild(img)}!0===window.story.isMobile()&&window.story.cursor(!0),window.story.start()}});var loadedScene=document.querySelector("a-scene");null!=loadedScene&&loadedScene.setAttribute("reach-load-local",!0)},function(t,e){AFRAME.registerGeometry("arrow",{schema:{vertices:{default:["0.4932 0.1454 0","0.2432 0.1454 0","0.4932 0.1454 0.1","0.2432 0.1454 0.1","0.2432 -0.7615 0","0.2432 -0.7615 0.1","-0.2568 0.1454 0","-0.5068 0.1454 0","-0.5068 0.1454 0.1","-0.2568 0.1454 0.1","-0.2568 -0.7615 0","-0.2568 -0.7615 0.1","-0.0068 0.9011 0.1","-0.0068 0.9011 0"]},faces:{default:["1 3 4","1 4 2","5 2 4","5 4 6","7 10 9","7 9 8","7 11 12","7 12 10","6 12 11","6 11 5","8 14 7","1 2 14","2 7 14","9 10 13","10 4 13","3 13 4","10 12 6","10 6 4","14 13 3","14 3 1","2 5 11","2 11 7","14 8 9","14 9 13"]}},init:function(t){var e=new THREE.Geometry;e.vertices=t.vertices.map((function(t){var e=t.split(" ").map((function(t){return parseFloat(t)}));return new THREE.Vector3(e[0],e[1],e[2])})),console.log(e.vertices),e.computeBoundingBox(),t.faces.forEach((function(t){var n=t.split(" ").map((function(t){return parseInt(t)}));e.faces.push(new THREE.Face3(n[0]-1,n[1]-1,n[2]-1))})),e.mergeVertices(),console.log(e.faces),e.computeFaceNormals(),e.computeVertexNormals(),this.geometry=e}})}]);