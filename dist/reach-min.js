!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=5)}([function(t,e,n){"use strict";function r(t,e){var n=e.x-t.x,r=e.y-t.y;return 0===n?r>=0?180:0:n>0?180-(Math.atan(r/n)*(180/Math.PI)-90):-(Math.atan(r/n)*(180/Math.PI)-90)}function i(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function o(t){if(void 0===window.reach_resource_prefix)return t;var e=t.toLowerCase();return e.startsWith("http://")||e.startsWith("https://")||e.startsWith("#")?t:window.reach_resource_prefix.concat(t)}function a(t,e){return 2*t*Math.sin(e/2)}function u(t,e,n){var r=l(n.direction)-l(e.direction),i=f(n.inclination)-f(e.inclination);return{width:a(t,r),height:a(t,i)}}function c(t,e){return(t+e)/2}function s(t){var e=t.split(" ");return{corner1:{direction:parseFloat(e[0]),inclination:parseFloat(e[1])},corner2:{direction:parseFloat(e[2]),inclination:parseFloat(e[3])}}}function l(t){return t%12/-12*2*Math.PI}function f(t){return t%12/12*2*Math.PI}n.d(e,"b",(function(){return r})),n.d(e,"f",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"d",(function(){return u})),n.d(e,"a",(function(){return c})),n.d(e,"e",(function(){return s}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o}));var r=n(0);function i(t,e,n){if(!0===t.options.floor)return function(t,e,n){var r=document.createElement("a-entity"),i=0;void 0!==t.options.direction&&(i=t.options.direction%12*-30),r.setAttribute("rotation",`0 ${i} 0`);var o=document.createElement("a-entity"),a=-2;void 0!==t.options.distance&&(a=-1*t.options.distance),o.setAttribute("position",`0 0 ${a}`),o.setAttribute("rotation","-90 0 0");var u=document.createElement("a-entity");u.setAttribute("class","clickable"),u.setAttribute("id","background"),u.setAttribute("vr-passage-link",`name: ${t.link}; event: click`);var c="#0000ff",s="0.7",l="circle";void 0!==t.options.backgroundColor&&(c=t.options.backgroundColor),void 0!==t.options.backgroundOpacity&&(s=t.options.backgroundOpacity),void 0!==t.options.shape&&(l=t.options.shape),u.setAttribute("geometry",`primitive: ${l};`),u.setAttribute("material",`color:  ${c};  shader:  flat; opacity: ${s};`);var f=document.createElement("a-entity"),p="#FAFAFA";return void 0!==t.options.color&&(p=t.options.color),f.setAttribute("text",`align: center; color: ${p}; wrapCount: 18; width: 0.65; value: ${t.text};`),f.setAttribute("position","0 0 0.05"),r.appendChild(o),o.appendChild(u),o.appendChild(f),r}(t);var i=document.createElement("a-entity");i.setAttribute("position","0 1.6 0");var o=document.createElement("a-entity"),a=(e+1)%12*-30,u=0,c=-2,s="1.0",l="1.0";if(void 0!==t.twinePosition&&(a=Object(r.b)(n,t.twinePosition)),void 0!==t.options.direction&&(a=t.options.direction%12*-30),void 0!==t.options.inclination&&(u=t.options.inclination%12*30),void 0!==t.options.distance&&(c=-1*t.options.distance),void 0!==t.options.width&&(s=t.options.width),void 0!==t.options.height&&(l=t.options.height),void 0!==t.options.corners){var f=Object(r.e)(t.options.corners),p=Object(r.d)(-1*c,f.corner1,f.corner2);a=Object(r.a)(f.corner1.direction,f.corner2.direction)%12*-30,u=Object(r.a)(f.corner1.inclination,f.corner2.inclination)%12*30,s=p.width,l=p.height}o.setAttribute("rotation",`${u} ${a} 0`);var d=document.createElement("a-entity");d.setAttribute("position",`0 0 ${c}`);var v=document.createElement("a-entity");v.setAttribute("class","clickable"),v.setAttribute("id","background"),v.setAttribute("vr-passage-link",`name: ${t.link}; event: click`);var h="#0000ff",g="0.7",y="plane";void 0!==t.options.backgroundColor&&(h=t.options.backgroundColor),void 0!==t.options.backgroundOpacity&&(g=t.options.backgroundOpacity),void 0!==t.options.shape&&(y=t.options.shape),v.setAttribute("geometry",`primitive: ${y}; width: ${s}; height: ${l};`),v.setAttribute("material",`color:  ${h};  shader:  flat; opacity: ${g};`);var _="#FAFAFA";return void 0!==t.options.color&&(_=t.options.color),v.setAttribute("text",`align: center; color: ${_}; wrapCount: 18; width: 0.65; value: ${t.text};`),i.appendChild(o),o.appendChild(d),d.appendChild(v),i}function o(t,e,n){var i=document.createElement("a-entity");i.setAttribute("position","0 1.6 0");var o=document.createElement("a-entity"),a=2*(e+1)%12*30,u=0,c=-2,s="1.5",l=`${s/8.5*11}`;if(void 0!==t.twinePosition&&(a=Object(r.b)(n,t.twinePosition)),void 0!==t.options.direction&&(a=t.options.direction%12*-30),void 0!==t.options.inclination&&(u=t.options.inclination%12*30),t.options.distance&&(c=-1*t.options.distance),void 0!==t.options.width&&(s=t.options.width),void 0!==t.options.height&&(l=t.options.height),void 0!==t.options.corners){var f=Object(r.e)(t.options.corners),p=Object(r.d)(-1*c,f.corner1,f.corner2);a=Object(r.a)(f.corner1.direction,f.corner2.direction)%12*-30,u=Object(r.a)(f.corner1.inclination,f.corner2.inclination)%12*30,s=p.width,l=p.height}o.setAttribute("rotation",`${u} ${a} 0`);var d=document.createElement("a-entity");d.setAttribute("position",`0 0 ${c}`);var v=document.createElement("a-entity"),h="#ffffff",g="0.7",y="plane";void 0!==t.options.backgroundColor&&(h=t.options.backgroundColor),void 0!==t.options.backgroundOpacity&&(g=t.options.backgroundOpacity),void 0!==t.options.shape&&(y=t.options.shape),v.setAttribute("id","background"),v.setAttribute("geometry",`primitive: ${y}; width:${s}; height:${l}`),void 0!==t.backgrounds&&void 0!==t.backgrounds[0]?v.setAttribute("material",`shader:  flat; opacity: ${g}; src: ${t.backgrounds[0].src}; transparent: true;`):v.setAttribute("material",`color:  ${h};  shader:  flat; opacity: ${g};`);var _="#000000";return void 0!==t.options.color&&(_=t.options.color),v.setAttribute("text",`align: center; color: ${_}; width: 0.85; wrapCount: 18; value: ${t.text};`),i.appendChild(o),o.appendChild(d),d.appendChild(v),i}},function(t,e,n){"use strict";var r=n(0);function i(t,e){if(!0===t.options.video)return function(t,e){var n=`video-${e}`,i=document.querySelector(`#${n}`);if(null===i){var o=document.querySelector("a-assets");(i=document.createElement("video")).setAttribute("src",Object(r.c)(t.src)),i.setAttribute("autoplay","true"),i.setAttribute("loop","true"),i.setAttribute("id",n),o.appendChild(i)}var a=document.createElement("a-videosphere");return a.setAttribute("src",`#${n}`),i.play(),a}(t,e);var n=document.createElement("a-sky");void 0===t.src?n.setAttribute("src","#reach-default-360"):n.setAttribute("src",Object(r.c)(t.src));var i="true",o=5e3;return!1===t.options.transparent&&(i="false"),void 0!==t.options.distance&&(o=t.options.distance),n.setAttribute("transparent",i),n.setAttribute("radius",o),n}n.d(e,"a",(function(){return i}))},function(t,e,n){(function(t,n){var r;!function(){var i="object"==typeof self&&self.self===self&&self||"object"==typeof t&&t.global===t&&t||this||{},o=i._,a=Array.prototype,u=Object.prototype,c="undefined"!=typeof Symbol?Symbol.prototype:null,s=a.push,l=a.slice,f=u.toString,p=u.hasOwnProperty,d=Array.isArray,v=Object.keys,h=Object.create,g=function(){},y=function(t){return t instanceof y?t:this instanceof y?void(this._wrapped=t):new y(t)};e.nodeType?i._=y:(!n.nodeType&&n.exports&&(e=n.exports=y),e._=y),y.VERSION="1.9.1";var _,m=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)}}return function(){return t.apply(e,arguments)}},b=function(t,e,n){return y.iteratee!==_?y.iteratee(t,e):null==t?y.identity:y.isFunction(t)?m(t,e,n):y.isObject(t)&&!y.isArray(t)?y.matcher(t):y.property(t)};y.iteratee=_=function(t,e){return b(t,e,1/0)};var A=function(t,e){return e=null==e?t.length-1:+e,function(){for(var n=Math.max(arguments.length-e,0),r=Array(n),i=0;i<n;i++)r[i]=arguments[i+e];switch(e){case 0:return t.call(this,r);case 1:return t.call(this,arguments[0],r);case 2:return t.call(this,arguments[0],arguments[1],r)}var o=Array(e+1);for(i=0;i<e;i++)o[i]=arguments[i];return o[e]=r,t.apply(this,o)}},P=function(t){if(!y.isObject(t))return{};if(h)return h(t);g.prototype=t;var e=new g;return g.prototype=null,e},w=function(t){return function(e){return null==e?void 0:e[t]}},O=function(t,e){return null!=t&&p.call(t,e)},x=function(t,e){for(var n=e.length,r=0;r<n;r++){if(null==t)return;t=t[e[r]]}return n?t:void 0},j=Math.pow(2,53)-1,k=w("length"),E=function(t){var e=k(t);return"number"==typeof e&&0<=e&&e<=j};y.each=y.forEach=function(t,e,n){var r,i;if(e=m(e,n),E(t))for(r=0,i=t.length;r<i;r++)e(t[r],r,t);else{var o=y.keys(t);for(r=0,i=o.length;r<i;r++)e(t[o[r]],o[r],t)}return t},y.map=y.collect=function(t,e,n){e=b(e,n);for(var r=!E(t)&&y.keys(t),i=(r||t).length,o=Array(i),a=0;a<i;a++){var u=r?r[a]:a;o[a]=e(t[u],u,t)}return o};var M=function(t){return function(e,n,r,i){var o=3<=arguments.length;return function(e,n,r,i){var o=!E(e)&&y.keys(e),a=(o||e).length,u=0<t?0:a-1;for(i||(r=e[o?o[u]:u],u+=t);0<=u&&u<a;u+=t){var c=o?o[u]:u;r=n(r,e[c],c,e)}return r}(e,m(n,i,4),r,o)}};y.reduce=y.foldl=y.inject=M(1),y.reduceRight=y.foldr=M(-1),y.find=y.detect=function(t,e,n){var r=(E(t)?y.findIndex:y.findKey)(t,e,n);if(void 0!==r&&-1!==r)return t[r]},y.filter=y.select=function(t,e,n){var r=[];return e=b(e,n),y.each(t,(function(t,n,i){e(t,n,i)&&r.push(t)})),r},y.reject=function(t,e,n){return y.filter(t,y.negate(b(e)),n)},y.every=y.all=function(t,e,n){e=b(e,n);for(var r=!E(t)&&y.keys(t),i=(r||t).length,o=0;o<i;o++){var a=r?r[o]:o;if(!e(t[a],a,t))return!1}return!0},y.some=y.any=function(t,e,n){e=b(e,n);for(var r=!E(t)&&y.keys(t),i=(r||t).length,o=0;o<i;o++){var a=r?r[o]:o;if(e(t[a],a,t))return!0}return!1},y.contains=y.includes=y.include=function(t,e,n,r){return E(t)||(t=y.values(t)),("number"!=typeof n||r)&&(n=0),0<=y.indexOf(t,e,n)},y.invoke=A((function(t,e,n){var r,i;return y.isFunction(e)?i=e:y.isArray(e)&&(r=e.slice(0,-1),e=e[e.length-1]),y.map(t,(function(t){var o=i;if(!o){if(r&&r.length&&(t=x(t,r)),null==t)return;o=t[e]}return null==o?o:o.apply(t,n)}))})),y.pluck=function(t,e){return y.map(t,y.property(e))},y.where=function(t,e){return y.filter(t,y.matcher(e))},y.findWhere=function(t,e){return y.find(t,y.matcher(e))},y.max=function(t,e,n){var r,i,o=-1/0,a=-1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t)for(var u=0,c=(t=E(t)?t:y.values(t)).length;u<c;u++)null!=(r=t[u])&&o<r&&(o=r);else e=b(e,n),y.each(t,(function(t,n,r){i=e(t,n,r),(a<i||i===-1/0&&o===-1/0)&&(o=t,a=i)}));return o},y.min=function(t,e,n){var r,i,o=1/0,a=1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t)for(var u=0,c=(t=E(t)?t:y.values(t)).length;u<c;u++)null!=(r=t[u])&&r<o&&(o=r);else e=b(e,n),y.each(t,(function(t,n,r){((i=e(t,n,r))<a||i===1/0&&o===1/0)&&(o=t,a=i)}));return o},y.shuffle=function(t){return y.sample(t,1/0)},y.sample=function(t,e,n){if(null==e||n)return E(t)||(t=y.values(t)),t[y.random(t.length-1)];var r=E(t)?y.clone(t):y.values(t),i=k(r);e=Math.max(Math.min(e,i),0);for(var o=i-1,a=0;a<e;a++){var u=y.random(a,o),c=r[a];r[a]=r[u],r[u]=c}return r.slice(0,e)},y.sortBy=function(t,e,n){var r=0;return e=b(e,n),y.pluck(y.map(t,(function(t,n,i){return{value:t,index:r++,criteria:e(t,n,i)}})).sort((function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(r<n||void 0===n)return 1;if(n<r||void 0===r)return-1}return t.index-e.index})),"value")};var C=function(t,e){return function(n,r,i){var o=e?[[],[]]:{};return r=b(r,i),y.each(n,(function(e,i){var a=r(e,i,n);t(o,e,a)})),o}};y.groupBy=C((function(t,e,n){O(t,n)?t[n].push(e):t[n]=[e]})),y.indexBy=C((function(t,e,n){t[n]=e})),y.countBy=C((function(t,e,n){O(t,n)?t[n]++:t[n]=1}));var S=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;y.toArray=function(t){return t?y.isArray(t)?l.call(t):y.isString(t)?t.match(S):E(t)?y.map(t,y.identity):y.values(t):[]},y.size=function(t){return null==t?0:E(t)?t.length:y.keys(t).length},y.partition=C((function(t,e,n){t[n?0:1].push(e)}),!0),y.first=y.head=y.take=function(t,e,n){return null==t||t.length<1?null==e?void 0:[]:null==e||n?t[0]:y.initial(t,t.length-e)},y.initial=function(t,e,n){return l.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},y.last=function(t,e,n){return null==t||t.length<1?null==e?void 0:[]:null==e||n?t[t.length-1]:y.rest(t,Math.max(0,t.length-e))},y.rest=y.tail=y.drop=function(t,e,n){return l.call(t,null==e||n?1:e)},y.compact=function(t){return y.filter(t,Boolean)};var I=function(t,e,n,r){for(var i=(r=r||[]).length,o=0,a=k(t);o<a;o++){var u=t[o];if(E(u)&&(y.isArray(u)||y.isArguments(u)))if(e)for(var c=0,s=u.length;c<s;)r[i++]=u[c++];else I(u,e,n,r),i=r.length;else n||(r[i++]=u)}return r};y.flatten=function(t,e){return I(t,e,!1)},y.without=A((function(t,e){return y.difference(t,e)})),y.uniq=y.unique=function(t,e,n,r){y.isBoolean(e)||(r=n,n=e,e=!1),null!=n&&(n=b(n,r));for(var i=[],o=[],a=0,u=k(t);a<u;a++){var c=t[a],s=n?n(c,a,t):c;e&&!n?(a&&o===s||i.push(c),o=s):n?y.contains(o,s)||(o.push(s),i.push(c)):y.contains(i,c)||i.push(c)}return i},y.union=A((function(t){return y.uniq(I(t,!0,!0))})),y.intersection=function(t){for(var e=[],n=arguments.length,r=0,i=k(t);r<i;r++){var o=t[r];if(!y.contains(e,o)){var a;for(a=1;a<n&&y.contains(arguments[a],o);a++);a===n&&e.push(o)}}return e},y.difference=A((function(t,e){return e=I(e,!0,!0),y.filter(t,(function(t){return!y.contains(e,t)}))})),y.unzip=function(t){for(var e=t&&y.max(t,k).length||0,n=Array(e),r=0;r<e;r++)n[r]=y.pluck(t,r);return n},y.zip=A(y.unzip),y.object=function(t,e){for(var n={},r=0,i=k(t);r<i;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n};var T=function(t){return function(e,n,r){n=b(n,r);for(var i=k(e),o=0<t?0:i-1;0<=o&&o<i;o+=t)if(n(e[o],o,e))return o;return-1}};y.findIndex=T(1),y.findLastIndex=T(-1),y.sortedIndex=function(t,e,n,r){for(var i=(n=b(n,r,1))(e),o=0,a=k(t);o<a;){var u=Math.floor((o+a)/2);n(t[u])<i?o=u+1:a=u}return o};var D=function(t,e,n){return function(r,i,o){var a=0,u=k(r);if("number"==typeof o)0<t?a=0<=o?o:Math.max(o+u,a):u=0<=o?Math.min(o+1,u):o+u+1;else if(n&&o&&u)return r[o=n(r,i)]===i?o:-1;if(i!=i)return 0<=(o=e(l.call(r,a,u),y.isNaN))?o+a:-1;for(o=0<t?a:u-1;0<=o&&o<u;o+=t)if(r[o]===i)return o;return-1}};y.indexOf=D(1,y.findIndex,y.sortedIndex),y.lastIndexOf=D(-1,y.findLastIndex),y.range=function(t,e,n){null==e&&(e=t||0,t=0),n||(n=e<t?-1:1);for(var r=Math.max(Math.ceil((e-t)/n),0),i=Array(r),o=0;o<r;o++,t+=n)i[o]=t;return i},y.chunk=function(t,e){if(null==e||e<1)return[];for(var n=[],r=0,i=t.length;r<i;)n.push(l.call(t,r,r+=e));return n};var $=function(t,e,n,r,i){if(!(r instanceof e))return t.apply(n,i);var o=P(t.prototype),a=t.apply(o,i);return y.isObject(a)?a:o};y.bind=A((function(t,e,n){if(!y.isFunction(t))throw new TypeError("Bind must be called on a function");var r=A((function(i){return $(t,r,e,this,n.concat(i))}));return r})),y.partial=A((function(t,e){var n=y.partial.placeholder,r=function(){for(var i=0,o=e.length,a=Array(o),u=0;u<o;u++)a[u]=e[u]===n?arguments[i++]:e[u];for(;i<arguments.length;)a.push(arguments[i++]);return $(t,r,this,this,a)};return r})),(y.partial.placeholder=y).bindAll=A((function(t,e){var n=(e=I(e,!1,!1)).length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var r=e[n];t[r]=y.bind(t[r],t)}})),y.memoize=function(t,e){var n=function(r){var i=n.cache,o=""+(e?e.apply(this,arguments):r);return O(i,o)||(i[o]=t.apply(this,arguments)),i[o]};return n.cache={},n},y.delay=A((function(t,e,n){return setTimeout((function(){return t.apply(null,n)}),e)})),y.defer=y.partial(y.delay,y,1),y.throttle=function(t,e,n){var r,i,o,a,u=0;n||(n={});var c=function(){u=!1===n.leading?0:y.now(),r=null,a=t.apply(i,o),r||(i=o=null)},s=function(){var s=y.now();u||!1!==n.leading||(u=s);var l=e-(s-u);return i=this,o=arguments,l<=0||e<l?(r&&(clearTimeout(r),r=null),u=s,a=t.apply(i,o),r||(i=o=null)):r||!1===n.trailing||(r=setTimeout(c,l)),a};return s.cancel=function(){clearTimeout(r),u=0,r=i=o=null},s},y.debounce=function(t,e,n){var r,i,o=function(e,n){r=null,n&&(i=t.apply(e,n))},a=A((function(a){if(r&&clearTimeout(r),n){var u=!r;r=setTimeout(o,e),u&&(i=t.apply(this,a))}else r=y.delay(o,e,this,a);return i}));return a.cancel=function(){clearTimeout(r),r=null},a},y.wrap=function(t,e){return y.partial(e,t)},y.negate=function(t){return function(){return!t.apply(this,arguments)}},y.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,r=t[e].apply(this,arguments);n--;)r=t[n].call(this,r);return r}},y.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},y.before=function(t,e){var n;return function(){return 0<--t&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}},y.once=y.partial(y.before,2),y.restArguments=A;var B=!{toString:null}.propertyIsEnumerable("toString"),F=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],q=function(t,e){var n=F.length,r=t.constructor,i=y.isFunction(r)&&r.prototype||u,o="constructor";for(O(t,o)&&!y.contains(e,o)&&e.push(o);n--;)(o=F[n])in t&&t[o]!==i[o]&&!y.contains(e,o)&&e.push(o)};y.keys=function(t){if(!y.isObject(t))return[];if(v)return v(t);var e=[];for(var n in t)O(t,n)&&e.push(n);return B&&q(t,e),e},y.allKeys=function(t){if(!y.isObject(t))return[];var e=[];for(var n in t)e.push(n);return B&&q(t,e),e},y.values=function(t){for(var e=y.keys(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=t[e[i]];return r},y.mapObject=function(t,e,n){e=b(e,n);for(var r=y.keys(t),i=r.length,o={},a=0;a<i;a++){var u=r[a];o[u]=e(t[u],u,t)}return o},y.pairs=function(t){for(var e=y.keys(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=[e[i],t[e[i]]];return r},y.invert=function(t){for(var e={},n=y.keys(t),r=0,i=n.length;r<i;r++)e[t[n[r]]]=n[r];return e},y.functions=y.methods=function(t){var e=[];for(var n in t)y.isFunction(t[n])&&e.push(n);return e.sort()};var N=function(t,e){return function(n){var r=arguments.length;if(e&&(n=Object(n)),r<2||null==n)return n;for(var i=1;i<r;i++)for(var o=arguments[i],a=t(o),u=a.length,c=0;c<u;c++){var s=a[c];e&&void 0!==n[s]||(n[s]=o[s])}return n}};y.extend=N(y.allKeys),y.extendOwn=y.assign=N(y.keys),y.findKey=function(t,e,n){e=b(e,n);for(var r,i=y.keys(t),o=0,a=i.length;o<a;o++)if(e(t[r=i[o]],r,t))return r};var R,L,K=function(t,e,n){return e in n};y.pick=A((function(t,e){var n={},r=e[0];if(null==t)return n;y.isFunction(r)?(1<e.length&&(r=m(r,e[1])),e=y.allKeys(t)):(r=K,e=I(e,!1,!1),t=Object(t));for(var i=0,o=e.length;i<o;i++){var a=e[i],u=t[a];r(u,a,t)&&(n[a]=u)}return n})),y.omit=A((function(t,e){var n,r=e[0];return y.isFunction(r)?(r=y.negate(r),1<e.length&&(n=e[1])):(e=y.map(I(e,!1,!1),String),r=function(t,n){return!y.contains(e,n)}),y.pick(t,r,n)})),y.defaults=N(y.allKeys,!0),y.create=function(t,e){var n=P(t);return e&&y.extendOwn(n,e),n},y.clone=function(t){return y.isObject(t)?y.isArray(t)?t.slice():y.extend({},t):t},y.tap=function(t,e){return e(t),t},y.isMatch=function(t,e){var n=y.keys(e),r=n.length;if(null==t)return!r;for(var i=Object(t),o=0;o<r;o++){var a=n[o];if(e[a]!==i[a]||!(a in i))return!1}return!0},R=function(t,e,n,r){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return!1;if(t!=t)return e!=e;var i=typeof t;return("function"===i||"object"===i||"object"==typeof e)&&L(t,e,n,r)},L=function(t,e,n,r){t instanceof y&&(t=t._wrapped),e instanceof y&&(e=e._wrapped);var i=f.call(t);if(i!==f.call(e))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return c.valueOf.call(t)===c.valueOf.call(e)}var o="[object Array]"===i;if(!o){if("object"!=typeof t||"object"!=typeof e)return!1;var a=t.constructor,u=e.constructor;if(a!==u&&!(y.isFunction(a)&&a instanceof a&&y.isFunction(u)&&u instanceof u)&&"constructor"in t&&"constructor"in e)return!1}r=r||[];for(var s=(n=n||[]).length;s--;)if(n[s]===t)return r[s]===e;if(n.push(t),r.push(e),o){if((s=t.length)!==e.length)return!1;for(;s--;)if(!R(t[s],e[s],n,r))return!1}else{var l,p=y.keys(t);if(s=p.length,y.keys(e).length!==s)return!1;for(;s--;)if(l=p[s],!O(e,l)||!R(t[l],e[l],n,r))return!1}return n.pop(),r.pop(),!0},y.isEqual=function(t,e){return R(t,e)},y.isEmpty=function(t){return null==t||(E(t)&&(y.isArray(t)||y.isString(t)||y.isArguments(t))?0===t.length:0===y.keys(t).length)},y.isElement=function(t){return!(!t||1!==t.nodeType)},y.isArray=d||function(t){return"[object Array]"===f.call(t)},y.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},y.each(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],(function(t){y["is"+t]=function(e){return f.call(e)==="[object "+t+"]"}})),y.isArguments(arguments)||(y.isArguments=function(t){return O(t,"callee")});var W=i.document&&i.document.childNodes;"object"!=typeof Int8Array&&"function"!=typeof W&&(y.isFunction=function(t){return"function"==typeof t||!1}),y.isFinite=function(t){return!y.isSymbol(t)&&isFinite(t)&&!isNaN(parseFloat(t))},y.isNaN=function(t){return y.isNumber(t)&&isNaN(t)},y.isBoolean=function(t){return!0===t||!1===t||"[object Boolean]"===f.call(t)},y.isNull=function(t){return null===t},y.isUndefined=function(t){return void 0===t},y.has=function(t,e){if(!y.isArray(e))return O(t,e);for(var n=e.length,r=0;r<n;r++){var i=e[r];if(null==t||!p.call(t,i))return!1;t=t[i]}return!!n},y.noConflict=function(){return i._=o,this},y.identity=function(t){return t},y.constant=function(t){return function(){return t}},y.noop=function(){},y.property=function(t){return y.isArray(t)?function(e){return x(e,t)}:w(t)},y.propertyOf=function(t){return null==t?function(){}:function(e){return y.isArray(e)?x(t,e):t[e]}},y.matcher=y.matches=function(t){return t=y.extendOwn({},t),function(e){return y.isMatch(e,t)}},y.times=function(t,e,n){var r=Array(Math.max(0,t));e=m(e,n,1);for(var i=0;i<t;i++)r[i]=e(i);return r},y.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},y.now=Date.now||function(){return(new Date).getTime()};var U={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},H=y.invert(U),z=function(t){var e=function(e){return t[e]},n="(?:"+y.keys(t).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(t){return t=null==t?"":""+t,r.test(t)?t.replace(i,e):t}};y.escape=z(U),y.unescape=z(H),y.result=function(t,e,n){y.isArray(e)||(e=[e]);var r=e.length;if(!r)return y.isFunction(n)?n.call(t):n;for(var i=0;i<r;i++){var o=null==t?void 0:t[e[i]];void 0===o&&(o=n,i=r),t=y.isFunction(o)?o.call(t):o}return t};var J=0;y.uniqueId=function(t){var e=++J+"";return t?t+e:e},y.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var V=/(.)^/,G={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Q=/\\|'|\r|\n|\u2028|\u2029/g,X=function(t){return"\\"+G[t]};y.template=function(t,e,n){!e&&n&&(e=n),e=y.defaults({},e,y.templateSettings);var r,i=RegExp([(e.escape||V).source,(e.interpolate||V).source,(e.evaluate||V).source].join("|")+"|$","g"),o=0,a="__p+='";t.replace(i,(function(e,n,r,i,u){return a+=t.slice(o,u).replace(Q,X),o=u+e.length,n?a+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?a+="'+\n((__t=("+r+"))==null?'':__t)+\n'":i&&(a+="';\n"+i+"\n__p+='"),e})),a+="';\n",e.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{r=new Function(e.variable||"obj","_",a)}catch(e){throw e.source=a,e}var u=function(t){return r.call(this,t,y)},c=e.variable||"obj";return u.source="function("+c+"){\n"+a+"}",u},y.chain=function(t){var e=y(t);return e._chain=!0,e};var Y=function(t,e){return t._chain?y(e).chain():e};y.mixin=function(t){return y.each(y.functions(t),(function(e){var n=y[e]=t[e];y.prototype[e]=function(){var t=[this._wrapped];return s.apply(t,arguments),Y(this,n.apply(y,t))}})),y},y.mixin(y),y.each(["pop","push","reverse","shift","sort","splice","unshift"],(function(t){var e=a[t];y.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],Y(this,n)}})),y.each(["concat","join","slice"],(function(t){var e=a[t];y.prototype[t]=function(){return Y(this,e.apply(this._wrapped,arguments))}})),y.prototype.value=function(){return this._wrapped},y.prototype.valueOf=y.prototype.toJSON=y.prototype.value,y.prototype.toString=function(){return String(this._wrapped)},void 0===(r=function(){return y}.apply(e,[]))||(n.exports=r)}()}).call(this,n(7),n(8)(t))},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(0);function i(t){var e=document.createElement("a-entity");e.setAttribute("position","0 1.6 0");var n=document.createElement("a-entity"),i=0,o=0;void 0!==t.options.direction&&(i=t.options.direction%12*-30),void 0!==t.options.inclination&&(o=t.options.inclination%12*30),n.setAttribute("rotation",`${o} ${i} 0`);var a=0;void 0!==t.options.direction&&(a=-2),void 0!==t.options.distance&&(a=-1*t.options.distance),console.log("sound distance "+a);var u=document.createElement("a-sound");return u.setAttribute("src",Object(r.c)(t.src)),u.setAttribute("position",`0 0 ${a}`),u.setAttribute("autoplay","true"),u.setAttribute("loop","true"),n.appendChild(u),e.appendChild(n),e}},function(t,e,n){"use strict";n.r(e);n(6)},function(module,__webpack_exports__,__webpack_require__){"use strict";var _underscore_min_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3),_underscore_min_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_underscore_min_js__WEBPACK_IMPORTED_MODULE_0__),_utility_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),_sky_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(2),_sound_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(4),_link_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(1),storyDocument,startnode,currentPassageName,currentPassageTwinePosition;function loadPassage(t){currentPassageName=t.getAttribute("name"),currentPassageTwinePosition=getPassageTwinePosition(t);var e=document.querySelectorAll("video");if(null!==e)for(var n=0;n<e.length;n++)e[n].pause();var r=document.querySelector("#container");Object(_utility_js__WEBPACK_IMPORTED_MODULE_1__.f)(r),currentPassageTwinePosition=getPassageTwinePosition(t),document.querySelector("a-scene").setAttribute("background","color: black");var i=getBackgroundsInPassage(t);for(n=0;n<i.length;n++){var o=Object(_sky_js__WEBPACK_IMPORTED_MODULE_2__.a)(i[n],currentPassageName);null!==o&&r.appendChild(o)}var a=getLinksInPassage(t);for(n=0;n<a.length;n++){var u=a[n],c=Object(_link_js__WEBPACK_IMPORTED_MODULE_4__.a)(u,n,currentPassageTwinePosition);r.appendChild(c)}var s=getPanelsInPassage(t);for(n=0;n<s.length;n++){var l=s[n],f=Object(_link_js__WEBPACK_IMPORTED_MODULE_4__.b)(l,n,currentPassageTwinePosition);r.appendChild(f)}var p=getSoundsInPassage(t);for(n=0;n<p.length;n++){var d=p[n],v=Object(_sound_js__WEBPACK_IMPORTED_MODULE_3__.a)(d);r.appendChild(v)}if(0===i.length){var h=Object(_sky_js__WEBPACK_IMPORTED_MODULE_2__.a)({options:{transparent:!1}},currentPassageName);r.appendChild(h)}}function getPassageById(t){return storyDocument.querySelector(`tw-passagedata[pid='${t}']`)}function getPassageByName(t){var e=storyDocument.querySelector(`tw-passagedata[name='${t.replace("'","\\'")}']`);return null===e&&console.log(`Could not find passage with name: ${t}`),e}function getPassageTwinePosition(t){if(void 0===t)return console.log(`could not find position of passage with name: ${name}`),{x:0,y:0};var e=t.getAttribute("position");if(void 0===e)return{x:0,y:0};var n=e.split(",");return console.log(n),{x:n[0],y:n[1]}}function getLinksInPassage(t){for(var e,n=/(^|({\s*(.+)\s*})|[^`])\[\[\s*((.+)\s*\|\s*(.+)\s*|(.+)\s*)\]\]/g,r=t.textContent,i=[];null!==(e=n.exec(r));){var o={};if(e[2]&&(o=JSON.parse(e[1])),e[5]){var a=getPassageByName(e[6]);i.push({text:e[5],link:e[6],options:o,twinePosition:getPassageTwinePosition(a)})}else{a=getPassageByName(e[7]);i.push({text:e[7],link:e[7],options:o,twinePosition:getPassageTwinePosition(a)})}}return i}function getBackgroundsInPassage(t){for(var e,n=/({\s*(.+)\s*})?\(\(\s*(.+)\s*\)\)/g,r=t.textContent,i=[];null!==(e=n.exec(r));){var o={};e[1]&&(o=JSON.parse(e[1])),i.push({src:e[3],options:o})}return i}function getSoundsInPassage(t){for(var e,n=/({\s*(.+)\s*})?~~\s*(.+)\s*~~/g,r=t.textContent,i=[];null!==(e=n.exec(r));){var o={};e[1]&&(o=JSON.parse(e[1])),i.push({src:e[3],options:o})}return i}function getTextInPassage(t){return{text:t.textContent.replace(/({\s*.+\s*})?`?(\[\[\s*.+\s*\]\]|`([^`]+)`|~~\s*.+\s*~~|\(\(\s*.+\s*\)\))\s*\n?/g,""),options:{direction:0}}}function getPanelsInPassage(t){for(var e,n=/({\s*(.+)\s*})?`\[\[\s*((.+)\s*\|\s*(.+)\s*|(.+)\s*)\]\]/g,r=t.textContent,i=[];null!==(e=n.exec(r));){var o={};if(e[1]&&(o=JSON.parse(e[1])),e[4]){var a=getBackgroundsInPassage(u=getPassageByName(e[5]));i.push({text:getTextInPassage(u).text,options:o,backgrounds:a,twinePosition:getPassageTwinePosition(u)})}else{var u;a=getBackgroundsInPassage(u=getPassageByName(e[6]));i.push({text:getTextInPassage(u).text,options:o,backgrounds:a,twinePosition:getPassageTwinePosition(u)})}}return i}console.log("REACH-0.0.18,18"),AFRAME.registerComponent("vr-passage-link",{schema:{event:{type:"string",default:""},name:{type:"string",default:""}},init:function(){var t=this;this.eventHandlerFn=function(){loadPassage(getPassageByName(t.data.name))}},update:function(t){var e=this.data,n=this.el;t.event&&e.event!==t.event&&n.removeEventListener(t.event,this.eventHandlerFn),e.event&&n.addEventListener(e.event,this.eventHandlerFn)},remove:function(){var t=this.data,e=this.el;t.event&&e.removeEventListener(t.event,this.eventHandlerFn)}}),AFRAME.registerComponent("rotation-reader",{init:function(){this.hudtext=document.querySelector("#hudtext")},tick:function(){this.hudtext.setAttribute("text",`value: dir:${(this.el.object3D.rotation.y/(2*Math.PI)*-12%12).toFixed(2)} ele:${(this.el.object3D.rotation.x/(2*Math.PI)*12%12).toFixed(2)}`)}}),AFRAME.registerComponent("reach-load-local",{init:function(){storyDocument=document,console.log("here"),document.querySelector("a-scene").setAttribute("cursor","rayOrigin: mouse"),document.querySelector("a-scene").setAttribute("raycaster","objects: .clickable");var cursor=storyDocument.querySelector("a-entity[cursor]");cursor.setAttribute("raycaster","objects: .clickable"),cursor.setAttribute("animation__click","property: scale; startEvents: click; easing: easeInCubic; dur: 150; from: 0.1 0.1 0.1; to: 1 1 1"),cursor.setAttribute("animation__mouseenter","property: scale; startEvents: mouseenter; easing: easeInCubic; dur: 100; from: 1 1 1; to: 1.2 1.2 1.2"),cursor.setAttribute("animation__mouseleave","property: scale; startEvents: mouseleave; easing: easeInCubic; dur: 100; to: 1 1 1"),cursor.setAttribute("material","color: black; shader: flat"),cursor.setAttribute("position","0 0 -1"),cursor.setAttribute("geometry","primitive: ring; radiusInner: 0.01; radiusOuter: 0.02;"),startnode=storyDocument.querySelector("tw-storydata").getAttribute("startnode");for(var userScripts=storyDocument.querySelector("tw-storydata").querySelectorAll('*[type="text/twine-javascript"]'),i=0;i<userScripts.length;i++){var script=userScripts[i].innerHTML;try{eval(script)}catch(t){console.log(t)}}if(null!==window.reach_preload_images)for(var i in window.reach_preload_images){var idTag=i,src=Object(_utility_js__WEBPACK_IMPORTED_MODULE_1__.c)(window.reach_preload_images[i]),img=document.createElement("img");img.setAttribute("crossorigin","anonymous"),img.setAttribute("id",idTag),img.setAttribute("src",src),storyDocument.querySelector("a-assets").appendChild(img)}var passage=getPassageById(startnode);if(loadPassage(passage),!0===window.reach_show_position){var hudtext=document.createElement("a-entity");hudtext.setAttribute("position","0 0 -1"),hudtext.setAttribute("text","value: 0 0"),hudtext.setAttribute("id","hudtext"),hudtext.setAttribute("geometry","primitive: plane; width:auto; height:auto};"),hudtext.setAttribute("material","color:  #000000;  shader:  flat; opacity: 0.3;");var camera=storyDocument.querySelector("a-camera");camera.appendChild(hudtext),camera.setAttribute("rotation-reader","")}}}),document.querySelector("a-scene").setAttribute("reach-load-local",!0),window._=_underscore_min_js__WEBPACK_IMPORTED_MODULE_0__},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}}]);